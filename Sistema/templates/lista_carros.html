<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header>
    <img src="{{ url_for('static', filename='images/Logo.png') }}" alt="" class="logo-menu">

    <ul class="lista-de-paginas">
      <li><a href="#">Dashboard</a></li>
      <li><a href="#">Controle de Clientes</a></li>
      <li><a href="#">Controle de Carros</a></li>
      <li><a href="#">Controle de Alugueis</a></li>
    </ul>
  </header>
  <main>
    <img class="logo-dashboard" src="{{ url_for('static', filename='images/Logo.png') }}" alt="">
    <h1 class="titulo">Sistema de Gestão de Alugueis Automotivos Locacar</h1>

    <h1>Busca de Carros</h1>
    <form action="/buscar_carros" method="POST">
      <label for="tipo">Tipo:</label>
      <select id="tipo" name="tipo">
        <option value="">Escolha</option>
      </select>
      <br>
  
      <label for="marca">Marca:</label>
      <select id="marca" name="marca">
        <option value="">Escolha</option>
      </select>
      
      <br>
  
      <label for="modelo">Modelo:</label>
      <select id="modelo" name="modelo">
        <option value="">Escolha</option>
      </select>
      <br>
  
      <label for="ano">Ano:</label>
      <select id="ano" name="ano">
        <option value="">Escolha</option>
      </select>
      <br>
  
      <input type="submit" value="Buscar">
    </form>

    <table>
      <tr>
        <th>Tipo</th>
        <th>Marca</th>
        <th>Modelo</th>
        <th>Ano</th>
      </tr>
      {% for tupla in dados %}
        <tr>
          <td>{{tupla["tipo"]}}</td>
          <td>{{tupla["marca"]}}</td>
          <td>{{tupla["modelo"]}}</td>
          <td>{{tupla["ano"]}}</td>
          <td><a href="{{url_for('editar_carro', id=tupla['id_carro'])}}">Editar</a></td>
          <td><a href="">Deletar</a></td>
        </tr>
      {% endfor %}
    </table>
  </main>
  <footer>

  </footer>

  <script>
    // Obtenha os dados do template
    var dadosCarros = {{ cars_busca | tojson | safe }};
    
    // Função para preencher um campo de seleção com base em dados
    function preencherSelect(elementId, dataKey) {
        var select = document.getElementById(elementId);
        var uniqueValues = [...new Set(dadosCarros.map(item => item[dataKey]))];
        uniqueValues.forEach(function (value) {
            var option = document.createElement("option");
            option.value = value;
            option.text = value;
            select.appendChild(option);
        });
    }
    
    // Preencha os campos de seleção com os dados dos carros
    preencherSelect("tipo", "tipo");
    preencherSelect("marca", "marca");
    preencherSelect("modelo", "modelo");
    preencherSelect("ano", "ano");
  </script>
</body>
</html>
